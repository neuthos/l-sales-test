#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run commitlint to validate commit message
npx --no -- commitlint --edit "$1" || {
  echo ""
  echo "‚ùå Commit message validation failed!"
  echo ""
  echo "üìã Required format:"
  echo "   <type>(<scope>): <subject>"
  echo ""
  echo "   [optional body]"
  echo ""
  echo "   [optional footer]"
  echo ""
  echo "üìå Rules:"
  echo "   ‚Ä¢ Type: feat, fix, docs, style, refactor, perf, test, chore"
  echo "   ‚Ä¢ Scope: optional (e.g., auth, api, ui)"
  echo "   ‚Ä¢ Subject: max 50 chars, lowercase, imperative mood, no period"
  echo "   ‚Ä¢ Body: optional, wrap at 72 chars"
  echo "   ‚Ä¢ Footer: optional (e.g., 'Closes #123', 'BREAKING CHANGE: ...')"
  echo ""
  echo "‚úÖ Valid examples:"
  echo "   feat(auth): add login functionality"
  echo "   fix(api): resolve null pointer in user service"
  echo "   docs: update installation guide"
  echo "   refactor(ui): simplify button component logic"
  echo ""
  echo "   feat(dashboard): add revenue chart widget"
  echo "   "
  echo "   Add interactive revenue chart with filtering capabilities."
  echo "   Supports daily, weekly, and monthly views."
  echo "   "
  echo "   Closes #456"
  echo ""
  echo "üí° To bypass validation (emergency only):"
  echo "   git commit --no-verify -m \"your message\""
  echo ""
  exit 1
}
